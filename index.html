<!DOCTYPE html>
<html>
<head>
    <title>Todos Goals</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/redux/3.7.2/redux.min.js"></script>
    <script src="https://unpkg.com/react@16.3.0-alpha.1/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@16.3.0-alpha.1/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/babel-standalone@6.15.0/babel.min.js"></script>
</head>
<body>
    <div>
        <h1>Todo List</h1>
        <input type="text" id="todo" placeholder="Add Todo">
        <button id="todoBtn">Add Todo</button>
        <ul id="todos"></ul>
    </div>
    <div>
        <h1>Goals</h1>
        <input type="text" id="goal" placeholder="Add Goal">
        <button id="goalBtn">Add Goal</button>
        <ul id="goals"></ul>
    </div>
    <hr />
    <div id="app"></div>
    <script type="text/javaScript" src="./index.js"></script>
    <script type="text/babel">
        const List = (props) => {
            return(
                <ul>
                    <li>LIST</li>
                </ul>
            )
        }

        class Todos extends React.Component{
            addItem = (e) => {
                e.preventDefault()
                const name = this.input.value
                this.input.value = ''

                this.props.store.dispatch(addTodoAction({
                    name,
                    complete: false,
                    id: generateId()
                }))
            }
            render(){
                return(
                    <div>
                        <h1>Todo List </h1>
                        <input
                            type="text"
                            placeholder="Add Todo"
                            ref={(input) => this.input = input}
                        />
                        <button onClick={this.addItem}>Add Todo</button> 
                        <List />
                    </div>
                )
            }
        }

        class Goals extends React.Component{
            addItem = (e) => {
                e.preventDefault()
                const name = this.input.value
                this.input.value = ''

                this.props.store.dispatch(addGoalAction({
                    name,
                    id: generateId()
                }))
            }
            render(){
                return(
                    <div>
                        <h1>Goals</h1>
                        <input
                            type="text"
                            placeholder="Add Goal"
                            ref={(input) => this.input = input}
                        />
                        <button onClick={this.addItem}>Add Goal</button>

                        <List />
                    </div>
                )
            }
        }

        class App extends React.Component {
            componentDidMount () {
                const { store } = this.props

                store.subscribe(() => this.forceUpdate())
            }
            render () {
                const { store } = this.props
                const { todos, goals } = store.getState()
                return(
                    <div>
                        <Todos todos={todos} store={this.props.store}/>
                        <Goals goals={goals}  store={this.props.store}/>
                    </div>
                )
            }
        }

        ReactDOM.render(
            <App store={store} />, 
            document.getElementById('app')
        )
    </script>
</body>
</html>